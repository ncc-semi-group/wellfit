<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout}">

<head>
    <title>wellfit</title>
    
    <!-- νμ΄μ§€λ³„ css -->
    <th:block layout:fragment="css">
        <!-- κ°λ³„ css νμΌμ—μ„ λ¶λ¬μ¬ κ²½μ° -->
        <link rel="stylesheet" th:href="@{/css/record/record.css}">
    
    </th:block>

</head>
<body>
<!-- νμ΄μ§€ λ‚΄μ© -->
<div layout:fragment="content">
    <div class="date-header" th:data-year="${year}" th:data-month="${month}" th:data-day="${day}">
        <div class="arrow" id="prev-date">&#9664;</div>
        <div class="date">
            <span class="calendar-icon" id="calendar-btn">π—“οΈ</span>
            <input type="date" id="date-input">
            <span id="current-date" th:text="${month} + '.' + ${day}"></span>
        </div>
        <div class="arrow" id="next-date">&#9654;</div>
    </div>

    
    <div class="main-content">
        <div class="header main-header">
            <h1>μ¤λμ κΈ°λ΅</h1>
            <div class="statistics-button"><i class="bi bi-bar-chart-fill"></i></div>
        </div>
        <div class="sub-container" th:with="ableKcal = ${dailyStatistics.getRecommendKcal() + dailyStatistics.getTotalBurnedKcal()}">
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-number" th:text="${dailyStatistics.getRecommendKcal()}"></div>
                    <div class="stat-label">λ‚΄ λ©ν‘ : <span id="targetText"></span></div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" th:text="${dailyStatistics.getTotalBurnedKcal()}">200</div>
                    <div class="stat-label">μ†λ¨λ‰</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="ableKcal" th:text="${ableKcal}"></div>
                    <div class="stat-label">μ„­μ·¨ κ°€λ¥</div>
                </div>
            </div>
            
            <div class="calories-info"><span id="leftoverKcal"></span> kcal μ„­μ·¨ κ°€λ¥</div>
            
            <div class="calories-and-label">
                <div class="calories-count">
                    <span id="currentKcal"></span> <span class="total" th:text="${'/ ' + ableKcal}"></span> <span class="unit">kcal</span>
                    <th:block th:if="${dailyStatistics.getCheatingKcal() != 0}">
                        &nbsp;<span class="cheat-kcal" th:text="${'+ ' + dailyStatistics.getCheatingKcal()}"></span>
                    </th:block>
                </div>
                
                <th:block th:if="${dailyStatistics.getCheatingKcal() == 0}">
                    <div class="progress-label" id="cheatDay">μΉν…λ°μ΄ μ„¤μ •</div>
                </th:block>
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill">
                    <div class="fill-carb"></div>
                    <div class="fill-protein"></div>
                    <div class="fill-fat"></div>
                    <div class="distinctive-line"></div>
                </div>
            </div>
            
            <div class="nutrition-section" th:data-user_target="${dailyStatistics.getTarget()}"
                 th:data-user_type="${user.getType()}">
                
                <div class="nutrition-row">
                    <div class="nutrition-item" th:with="current = ${#numbers.formatInteger(dailyStatistics.getTotalCarbohydrate(), 1)},
                        target = ${#numbers.formatInteger(ableKcal * user.getCarbohydrate() / 400, 1)}">
                        <div class="nutrition-label">νƒ„μν™”λ¬Ό</div>
                        <div class="nutrition-bar">
                            <div class="nutrition-fill carb-fill alert-test" th:data-current="${current}" th:data-target="${target}"></div>
                        </div>
                        <div class="nutrition-value"><span id="alertCarb" th:text="${current}"></span><span th:text="${' / ' + target + 'g'}"></span></div>
                    </div>
                    <div class="nutrition-item" th:with="current = ${#numbers.formatInteger(dailyStatistics.getTotalProtein(), 1)},
                        target = ${#numbers.formatInteger(ableKcal * user.getProtein() / 400, 1)}">
                        <div class="nutrition-label">λ‹¨λ°±μ§</div>
                        <div class="nutrition-bar">
                            <div class="nutrition-fill protein-fill" th:data-current="${current}" th:data-target="${target}"></div>
                        </div>
                        <div class="nutrition-value" th:text="${current + ' / ' + target + 'g'}"></div>
                    </div>
                    <div class="nutrition-item" th:with="current = ${#numbers.formatInteger(dailyStatistics.getTotalFat(), 1)},
                        target = ${#numbers.formatInteger(ableKcal * user.getFat() / 900, 1)}">
                        <div class="nutrition-label">μ§€λ°©</div>
                        <div class="nutrition-bar">
                            <div class="nutrition-fill fat-fill alert-test" th:data-current="${current}" th:data-target="${target}"></div>
                        </div>
                        <div class="nutrition-value"><span id="alertFat" th:text="${current}"></span><span th:text="${' / ' + target + 'g'}"></span></div>
                    </div>
                </div>
                
                <div class="detail-button" id="detailBtn">+ μƒμ„Έλ³΄κΈ°</div>
                
                <div id="detailSection">
                    <div class="nutrition-row">
                        <div class="nutrition-item" th:with="current = ${#numbers.formatInteger(dailyStatistics.getTotalCholesterol(), 1)}">
                            <div class="nutrition-label">μ½λ μ¤νΈλ΅¤</div>
                            <div class="nutrition-bar">
                                <div class="nutrition-fill cholesterol-fill alert-test" th:data-current="${current}" data-target="300"></div>
                            </div>
                            <div class="nutrition-value"><span th:text="${current}"></span> / 300mg</div>
                        </div>
                        <div class="nutrition-item" th:with="current = ${#numbers.formatInteger(dailyStatistics.getTotalNatrium(), 1)}">
                            <div class="nutrition-label">λ‚νΈλ¥¨</div>
                            <div class="nutrition-bar">
                                <div class="nutrition-fill sodium-fill alert-test" th:data-current="${current}" data-target="2000"></div>
                            </div>
                            <div class="nutrition-value"><span th:text="${current}"></span> / 2000mg</div>
                        </div>
                    </div>
                    
                    <div class="nutrition-row">
                        <div class="nutrition-item" th:with="current = ${#numbers.formatInteger(dailyStatistics.getTotalSugar(), 1)}">
                            <div class="nutrition-label">λ‹Ήλ¥</div>
                            <div class="nutrition-bar">
                                <div class="nutrition-fill sugar-fill alert-test" th:data-current="${current}" data-target="100"></div>
                            </div>
                            <div class="nutrition-value"><span th:text="${current}"></span> / 100g</div>
                        </div>
                        <div class="nutrition-item" th:with="current = ${#numbers.formatDecimal(dailyStatistics.getTotalSaturatedFat(), 1, 1)}">
                            <div class="nutrition-label">ν¬ν™”μ§€λ°©</div>
                            <div class="nutrition-bar">
                                <div class="nutrition-fill saturated-fill alert-test" th:data-current="${current}" data-target="15"></div>
                            </div>
                            <div class="nutrition-value"><span th:text="${current}"></span> / 15g</div>
                        </div>
                        <div class="nutrition-item" th:with="current = ${#numbers.formatDecimal(dailyStatistics.getTotalTransFat(), 1, 1)}">
                            <div class="nutrition-label">νΈλμ¤μ§€λ°©</div>
                            <div class="nutrition-bar">
                                <div class="nutrition-fill trans-fill alert-test" th:data-current="${current}" data-target="3"></div>
                            </div>
                            <div class="nutrition-value"><span th:text="${current}"></span> / 3g</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        
        <!-- νƒ€μ΄ν‹€ -->
        <div class="sub-container meal-sub">
            <div class="header">
                <h1>μ‹μ‚¬</h1>
            </div>
            
            <!-- μ‹μ‚¬ λ©λ΅ -->
            <div class="meals-container">
                <!-- μ•„μΉ¨ μ‹μ‚¬ -->
                <div class="meal-card" data-meal_type="breakfast">
                    <div class="meal-icon breakfast-icon">
                        <!-- μ•„μΉ¨ μ•„μ΄μ½ (μ»µκ³Ό μ ‘μ‹) -->
                        <span>π³</span>
                    </div>
                    <div class="meal-name">μ•„μΉ¨</div>
                    <div class="meal-calories"
                         th:text="${foodRecords.containsKey('breakfast') ? foodRecords.get('breakfast').kcal + 'kcal' : '0kcal'}">
                    </div>
                    <div class="status-icon"></div>
                </div>
                
                <!-- μ μ‹¬ μ‹μ‚¬ -->
                <div class="meal-card" data-meal_type="lunch">
                    <div class="meal-icon lunch-icon">
                        <!-- μ μ‹¬ μ•„μ΄μ½ (νƒμ–‘) -->
                        <span>β€οΈ</span>
                    </div>
                    <div class="meal-name">μ μ‹¬</div>
                    <div class="meal-calories"
                         th:text="${foodRecords.containsKey('lunch') ? foodRecords.get('lunch').kcal + 'kcal' : '0kcal'}">
                    </div>
                    <div class="status-icon"></div>
                </div>
                
                <!-- μ €λ… μ‹μ‚¬ -->
                <div class="meal-card" data-meal_type="dinner">
                    <div class="meal-icon dinner-icon">
                        <!-- μ €λ… μ•„μ΄μ½ (λ‹¬) -->
                        <span>π™</span>
                    </div>
                    <div class="meal-name">μ €λ…</div>
                    <div class="meal-calories"
                         th:text="${foodRecords.containsKey('dinner') ? foodRecords.get('dinner').kcal + 'kcal' : '0kcal'}">
                    </div>
                    <div class="status-icon"></div>
                </div>
                
                <!-- κ°„μ‹ -->
                <div class="meal-card meal-bottom" data-meal_type="snack">
                    <div class="meal-icon snack-icon">
                        <!-- κ°„μ‹ μ•„μ΄μ½ (μλ£μ™€ κ³Όμ) -->
                        <span>π§ƒ</span>
                    </div>
                    <div class="meal-name">κ°„μ‹</div>
                    <div class="meal-calories"
                         th:text="${foodRecords.containsKey('snack') ? foodRecords.get('snack').kcal + 'kcal' : '0kcal'}">
                    </div>
                    <div class="status-icon"></div>
                </div>
            </div>
        </div>
        
        
        <!-- μ²΄μ¤‘ μ •λ³΄ μ„Ήμ… -->
        <div class="sub-container">
            <div class="header">
                <h1>μ²΄μ¤‘</h1>
            </div>
            
            
            <!-- μ²΄μ¤‘ μ •λ³΄ λ μ΄μ•„μ›ƒ -->
            <div class="weight-info" th:data-user_height="${user.getHeight()}" th:data-user_weight="${user.getCurrentWeight()}"
            th:data-past_month_weight="${pastMonthWeight}" th:data-past_week_weight="${pastWeekWeight}"
            th:data-statistics_weight="${dailyStatistics.getWeight()}" th:data-goal_weight="${dailyStatistics.getGoalWeight()}">
                <!-- μ²΄μ¤‘ λ°μ΄ν„° ν—¤λ” -->
                <div class="weight-header">
                    <!-- ν„μ¬ μ²΄μ¤‘ -->
                    <div class="current-weight">
                        <span id="currentWeight"></span> kg
                    </div>
                    <div class="info-container">
                        <!-- λ©ν‘ μ²΄μ¤‘ -->
                        <div class="goal-info"></div>
                        <!-- BMI μ •λ³΄ -->
                        <div class="bmi-info">BMI : 23.5</div>
                    </div>
                </div>
                
                <!-- BMI λ²”μ„ ν‘μ‹ -->
                <div class="bmi-range-container">
                    <div class="bmi-range-bar"></div>
                    <div class="bmi-marker"></div>
                    <div class="bmi-labels">
                        <span>μ €μ²΄μ¤‘</span>
                        <span class="bmi-labels-margin">μ •μƒ</span>
                        <span>κ³Όμ²΄μ¤‘</span>
                        <span>λΉ„λ§</span>
                        <span>κ³ λ„λΉ„λ§</span>
                    </div>
                </div>
                
                <!-- μ²΄μ¤‘ λ³€ν™” μ •λ³΄ -->
                <div class="weight-changes">
                    <div class="weight-change">
                        <span>μΌμ£ΌμΌ λ™μ•</span>
                        <span id="weekDiff">-1kg</span>
                    </div>
                    <div class="weight-change">
                        <span>ν• λ‹¬ λ™μ•</span>
                        <span id="monthDiff">-5kg</span>
                    </div>
                </div>
            </div>
            
            <!-- λ“±λ΅ λ²„νΌ -->
            <button class="record-button weight-button">λ“±λ΅</button>
        </div>
        
        
        <!-- μ΄λ™ μ •λ³΄ μ„Ήμ… -->
        <div class="sub-container exercise-sub">
            <div class="header">
                <h1>μ΄λ™</h1>
            </div>
            
            <!-- μ΄λ™ μ •λ³΄ λ μ΄μ•„μ›ƒ -->
            <div class="exercise-info">
                <!-- λ¤λ²¨ μ•„μ΄μ½ -->
                <div class="dumbbell-container">
                    <div class="circle-bg">
                        <div class="dumbbell">
                            <div class="dumbbell-bar"></div>
                        </div>
                    </div>
                </div>
                
                <!-- μ΄λ™ λ°μ΄ν„° -->
                <div class="exercise-data">
                    <!-- μ΄λ™ μ‹κ°„ λΌλ²¨ -->
                    <div class="exercise-time-label">μ¤λμ μ΄λ™ μ‹κ°„</div>
                    
                    <!-- μ΄λ™ μ‹κ°„ κ°’ -->
                    <div class="exercise-time-value" th:text="${dailyStatistics.getTotalExerciseTime() + 'λ¶„'}"></div>
                    
                    <!-- μΉΌλ΅λ¦¬ μ •λ³΄ -->
                    <div class="burn-calories-info">
                        <span class="fire-icon">π”¥</span>
                        <span th:text="${dailyStatistics.getTotalBurnedKcal() + ' kcal'}"></span>
                    </div>
                </div>
            </div>
            
            <!-- λ“±λ΅ λ²„νΌ -->
            <button class="record-button exercise-button">λ“±λ΅</button>
        </div>
    </div>
    
    <!-- μ²΄μ¤‘ μ…λ ¥ λ¨λ‹¬ -->
    <div class="modal-overlay" id="weightModal">
        <div class="modal-container">
            <div class="modal-header">
                <div class="modal-title">μ²΄μ¤‘ μ…λ ¥</div>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="weight-input-container">
                    <div class="weight-input-group">
                        <input type="number" class="weight-input" id="weightInput" value="79.6" step="0.1"
                               inputmode="decimal" min="20" max="200">
                        <span class="weight-unit">kg</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-button cancel-button" id="cancelButton">μ·¨μ†</button>
                <button class="modal-button submit-button" id="submitButton">λ“±λ΅</button>
            </div>
        </div>
    </div>
    
    
    <!-- μΉν…λ°μ΄ μ„¤μ • λ¨λ‹¬ -->
    <div class="modal-overlay" id="cheatDayModal">
        <div class="modal-container">
            <div class="modal-header">
                <div class="modal-title">μΉν…λ°μ΄ μ„¤μ •
                    <i class="bi bi-question-circle-fill" id="cheatDetail"></i>
                </div>
                <button class="modal-close">&times;</button>
            </div>
            
            <div class="modal-body">
                <div class="points-info">
                    <div class="points-label">μ‚¬μ© κ°€λ¥ ν¬μΈνΈ</div>
                    <div class="points-value"><span id="cheatPoint" th:text="${user.getCheatingDay()}"></span> cp</div>
                </div>
                <button class="use-button">μ‚¬μ©</button>
            </div>

        </div>
    </div>
    
    <div id="cheatDayTooltip" class="popover-tooltip">
        μΉΌλ΅λ¦¬ μ ν•μ„ μ΄κ³Όν• κ²½μ°, μ΄κ³Όν• μΉΌλ΅λ¦¬λ§νΌ <span class="accent">μΉν…λ°μ΄ ν¬μΈνΈ(cp)</span>λ¥Ό μ†λ¨ν•μ—¬ ν•΄λ‹Ή λ‚ μ„ μΉν…λ°μ΄λ΅ μ„¤μ •ν•κ³  μ‹λ‹¨ μ™„μλ¥Ό μ΄μ–΄λ‚κ° μ μμµλ‹λ‹¤.<br>
        ν¬μΈνΈλ” <span class="accent">λ‹ΉμΌ μ‹λ‹¨ κΈ°λ΅μ„ μμ • μ „μ— μ™„λ£</span>ν•κ³  <span class="accent">μ‹λ‹¨ λ©ν‘λ¥Ό λ‹¬μ„±ν•  μ‹</span> μΌμ •λ‰ νλ“ν•  μ μμΌλ©°, <br><span class="accent">μµλ€ 1,000ν¬μΈνΈκΉμ§€ λ³΄μ  κ°€λ¥ν•©λ‹λ‹¤.</span><br>
        <span class="accent">μΉν…λ°μ΄λ΅ μ„¤μ •λ λ‚ μ§μ μ‹λ‹¨κ³Ό μ΄λ™ κΈ°λ΅μ€ μ¶”ν›„ μμ •μ΄ λ¶κ°€λ¥</span>ν•λ‹, μ‹λ‹¨ κΈ°λ΅μ„ μ™„λ£ν• ν›„ μ„¤μ •ν•΄μ£Όμ‹κΈ° λ°”λλ‹λ‹¤.
    </div>


</div>


<!-- νμ΄μ§€λ³„ JavaScript -->
<th:block layout:fragment="script">
    
    <!-- κ°λ³„ js νμΌμ—μ„ λ¶λ¬μ¬ κ²½μ° -->
    <script th:src="@{/js/record/record.js}"></script>


</th:block>
</body>

</html>