<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout}">

<head>
    <title>wellfit</title>
    
    <!-- ÌéòÏù¥ÏßÄÎ≥Ñ css -->
    <th:block layout:fragment="css">
        <!-- Í∞úÎ≥Ñ css ÌååÏùºÏóêÏÑú Î∂àÎü¨Ïò¨ Í≤ΩÏö∞ -->
        <link rel="stylesheet" th:href="@{/css/record/record.css}">
    
    </th:block>

</head>
<body>
<!-- ÌéòÏù¥ÏßÄ ÎÇ¥Ïö© -->
<div layout:fragment="content">
    <div class="date-header" th:data-year="${year}" th:data-month="${month}" th:data-day="${day}">
        <div class="arrow" id="prev-date">&#9664;</div>
        <div class="date">
            <span class="calendar-icon" id="calendar-btn">üóìÔ∏è</span>
            <input type="date" id="date-input">
            <span id="current-date" th:text="${month} + '.' + ${day}"></span>
        </div>
        <div class="arrow" id="next-date">&#9654;</div>
    </div>

    
    <div class="main-content">
        <div class="header main-header">
            <h1>Ïò§ÎäòÏùò Í∏∞Î°ù</h1>
            <div class="statistics-button"><i class="bi bi-bar-chart-fill"></i></div>
        </div>
        <div class="sub-container" th:with="ableKcal = ${dailyStatistics.getRecommendKcal() + dailyStatistics.getTotalBurnedKcal()}">
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-number" th:text="${dailyStatistics.getRecommendKcal()}"></div>
                    <div class="stat-label">ÎÇ¥ Î™©Ìëú : <span id="targetText"></span></div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" th:text="${dailyStatistics.getTotalBurnedKcal()}">200</div>
                    <div class="stat-label">ÏÜåÎ™®Îüâ</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="ableKcal" th:text="${ableKcal}"></div>
                    <div class="stat-label">ÏÑ≠Ï∑® Í∞ÄÎä•</div>
                </div>
            </div>
            
            <div class="calories-info"><span id="leftoverKcal"></span> kcal ÏÑ≠Ï∑® Í∞ÄÎä•</div>
            
            <div class="calories-and-label">
                <div class="calories-count">
                    <span id="currentKcal"></span> <span class="total" th:text="${'/ ' + ableKcal}"></span> <span class="unit">kcal</span>
                    <th:block th:if="${dailyStatistics.getCheatingKcal() != 0}">
                        &nbsp;<span class="cheat-kcal" th:text="${'+ ' + dailyStatistics.getCheatingKcal()}"></span>
                    </th:block>
                </div>
                
                <th:block th:if="${dailyStatistics.getCheatingKcal() == 0}">
                    <div class="progress-label" id="cheatDay">ÏπòÌåÖÎç∞Ïù¥ ÏÑ§Ï†ï</div>
                </th:block>
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill">
                    <div class="fill-carb"></div>
                    <div class="fill-protein"></div>
                    <div class="fill-fat"></div>
                    <div class="distinctive-line"></div>
                </div>
            </div>
            
            <div class="nutrition-section" th:data-user_target="${dailyStatistics.getTarget()}"
                 th:data-user_type="${user.getType()}">
                
                <div class="nutrition-row">
                    <div class="nutrition-item" th:with="current = ${#numbers.formatInteger(dailyStatistics.getTotalCarbohydrate(), 1)},
                        target = ${#numbers.formatInteger(ableKcal * user.getCarbohydrate() / 400, 1)}">
                        <div class="nutrition-label">ÌÉÑÏàòÌôîÎ¨º</div>
                        <div class="nutrition-bar">
                            <div class="nutrition-fill carb-fill alert-test" th:data-current="${current}" th:data-target="${target}"></div>
                        </div>
                        <div class="nutrition-value"><span id="alertCarb" th:text="${current}"></span><span th:text="${' / ' + target + 'g'}"></span></div>
                    </div>
                    <div class="nutrition-item" th:with="current = ${#numbers.formatInteger(dailyStatistics.getTotalProtein(), 1)},
                        target = ${#numbers.formatInteger(ableKcal * user.getProtein() / 400, 1)}">
                        <div class="nutrition-label">Îã®Î∞±Ïßà</div>
                        <div class="nutrition-bar">
                            <div class="nutrition-fill protein-fill" th:data-current="${current}" th:data-target="${target}"></div>
                        </div>
                        <div class="nutrition-value" th:text="${current + ' / ' + target + 'g'}"></div>
                    </div>
                    <div class="nutrition-item" th:with="current = ${#numbers.formatInteger(dailyStatistics.getTotalFat(), 1)},
                        target = ${#numbers.formatInteger(ableKcal * user.getFat() / 900, 1)}">
                        <div class="nutrition-label">ÏßÄÎ∞©</div>
                        <div class="nutrition-bar">
                            <div class="nutrition-fill fat-fill alert-test" th:data-current="${current}" th:data-target="${target}"></div>
                        </div>
                        <div class="nutrition-value"><span id="alertFat" th:text="${current}"></span><span th:text="${' / ' + target + 'g'}"></span></div>
                    </div>
                </div>
                
                <div class="detail-button" id="detailBtn">+ ÏÉÅÏÑ∏Î≥¥Í∏∞</div>
                
                <div id="detailSection">
                    <div class="nutrition-row">
                        <div class="nutrition-item" th:with="current = ${#numbers.formatInteger(dailyStatistics.getTotalCholesterol(), 1)}">
                            <div class="nutrition-label">ÏΩúÎ†àÏä§Ìä∏Î°§</div>
                            <div class="nutrition-bar">
                                <div class="nutrition-fill cholesterol-fill alert-test" th:data-current="${current}" data-target="300"></div>
                            </div>
                            <div class="nutrition-value"><span th:text="${current}"></span> / 300mg</div>
                        </div>
                        <div class="nutrition-item" th:with="current = ${#numbers.formatInteger(dailyStatistics.getTotalNatrium(), 1)}">
                            <div class="nutrition-label">ÎÇòÌä∏Î•®</div>
                            <div class="nutrition-bar">
                                <div class="nutrition-fill sodium-fill alert-test" th:data-current="${current}" data-target="2000"></div>
                            </div>
                            <div class="nutrition-value"><span th:text="${current}"></span> / 2000mg</div>
                        </div>
                    </div>
                    
                    <div class="nutrition-row">
                        <div class="nutrition-item" th:with="current = ${#numbers.formatInteger(dailyStatistics.getTotalSugar(), 1)}">
                            <div class="nutrition-label">ÎãπÎ•ò</div>
                            <div class="nutrition-bar">
                                <div class="nutrition-fill sugar-fill alert-test" th:data-current="${current}" data-target="100"></div>
                            </div>
                            <div class="nutrition-value"><span th:text="${current}"></span> / 100g</div>
                        </div>
                        <div class="nutrition-item" th:with="current = ${#numbers.formatDecimal(dailyStatistics.getTotalSaturatedFat(), 1, 1)}">
                            <div class="nutrition-label">Ìè¨ÌôîÏßÄÎ∞©</div>
                            <div class="nutrition-bar">
                                <div class="nutrition-fill saturated-fill alert-test" th:data-current="${current}" data-target="15"></div>
                            </div>
                            <div class="nutrition-value"><span th:text="${current}"></span> / 15g</div>
                        </div>
                        <div class="nutrition-item" th:with="current = ${#numbers.formatDecimal(dailyStatistics.getTotalTransFat(), 1, 1)}">
                            <div class="nutrition-label">Ìä∏ÎûúÏä§ÏßÄÎ∞©</div>
                            <div class="nutrition-bar">
                                <div class="nutrition-fill trans-fill alert-test" th:data-current="${current}" data-target="3"></div>
                            </div>
                            <div class="nutrition-value"><span th:text="${current}"></span> / 3g</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        
        <!-- ÌÉÄÏù¥ÌãÄ -->
        <div class="sub-container meal-sub">
            <div class="header">
                <h1>ÏãùÏÇ¨</h1>
            </div>
            
            <!-- ÏãùÏÇ¨ Î™©Î°ù -->
            <div class="meals-container">
                <!-- ÏïÑÏπ® ÏãùÏÇ¨ -->
                <div class="meal-card" data-meal_type="breakfast">
                    <div class="meal-icon breakfast-icon">
                        <!-- ÏïÑÏπ® ÏïÑÏù¥ÏΩò (ÏªµÍ≥º Ï†ëÏãú) -->
                        <span>üç≥</span>
                    </div>
                    <div class="meal-name">ÏïÑÏπ®</div>
                    <div class="meal-calories"
                         th:text="${foodRecords.containsKey('breakfast') ? foodRecords.get('breakfast').kcal + 'kcal' : '0kcal'}">
                    </div>
                    <div class="status-icon"></div>
                </div>
                
                <!-- Ï†êÏã¨ ÏãùÏÇ¨ -->
                <div class="meal-card" data-meal_type="lunch">
                    <div class="meal-icon lunch-icon">
                        <!-- Ï†êÏã¨ ÏïÑÏù¥ÏΩò (ÌÉúÏñë) -->
                        <span>‚òÄÔ∏è</span>
                    </div>
                    <div class="meal-name">Ï†êÏã¨</div>
                    <div class="meal-calories"
                         th:text="${foodRecords.containsKey('lunch') ? foodRecords.get('lunch').kcal + 'kcal' : '0kcal'}">
                    </div>
                    <div class="status-icon"></div>
                </div>
                
                <!-- Ï†ÄÎÖÅ ÏãùÏÇ¨ -->
                <div class="meal-card" data-meal_type="dinner">
                    <div class="meal-icon dinner-icon">
                        <!-- Ï†ÄÎÖÅ ÏïÑÏù¥ÏΩò (Îã¨) -->
                        <span>üåô</span>
                    </div>
                    <div class="meal-name">Ï†ÄÎÖÅ</div>
                    <div class="meal-calories"
                         th:text="${foodRecords.containsKey('dinner') ? foodRecords.get('dinner').kcal + 'kcal' : '0kcal'}">
                    </div>
                    <div class="status-icon"></div>
                </div>
                
                <!-- Í∞ÑÏãù -->
                <div class="meal-card meal-bottom" data-meal_type="snack">
                    <div class="meal-icon snack-icon">
                        <!-- Í∞ÑÏãù ÏïÑÏù¥ÏΩò (ÏùåÎ£åÏôÄ Í≥ºÏûê) -->
                        <span>üßÉ</span>
                    </div>
                    <div class="meal-name">Í∞ÑÏãù</div>
                    <div class="meal-calories"
                         th:text="${foodRecords.containsKey('snack') ? foodRecords.get('snack').kcal + 'kcal' : '0kcal'}">
                    </div>
                    <div class="status-icon"></div>
                </div>
            </div>
        </div>
        
        
        <!-- Ï≤¥Ï§ë Ï†ïÎ≥¥ ÏÑπÏÖò -->
        <div class="sub-container">
            <div class="header">
                <h1>Ï≤¥Ï§ë</h1>
            </div>
            
            
            <!-- Ï≤¥Ï§ë Ï†ïÎ≥¥ Î†àÏù¥ÏïÑÏõÉ -->
            <div class="weight-info" th:data-user_height="${user.getHeight()}" th:data-user_weight="${user.getCurrentWeight()}"
            th:data-past_month_weight="${pastMonthWeight}" th:data-past_week_weight="${pastWeekWeight}"
            th:data-statistics_weight="${dailyStatistics.getWeight()}" th:data-goal_weight="${dailyStatistics.getGoalWeight()}">
                <!-- Ï≤¥Ï§ë Îç∞Ïù¥ÌÑ∞ Ìó§Îçî -->
                <div class="weight-header">
                    <!-- ÌòÑÏû¨ Ï≤¥Ï§ë -->
                    <div class="current-weight">
                        <span id="currentWeight"></span> kg
                    </div>
                    <div class="info-container">
                        <!-- Î™©Ìëú Ï≤¥Ï§ë -->
                        <div class="goal-info"></div>
                        <!-- BMI Ï†ïÎ≥¥ -->
                        <div class="bmi-info">BMI : 23.5</div>
                    </div>
                </div>
                
                <!-- BMI Î≤îÏúÑ ÌëúÏãú -->
                <div class="bmi-range-container">
                    <div class="bmi-range-bar"></div>
                    <div class="bmi-marker"></div>
                    <div class="bmi-labels">
                        <span>Ï†ÄÏ≤¥Ï§ë</span>
                        <span class="bmi-labels-margin">Ï†ïÏÉÅ</span>
                        <span>Í≥ºÏ≤¥Ï§ë</span>
                        <span>ÎπÑÎßå</span>
                        <span>Í≥†ÎèÑÎπÑÎßå</span>
                    </div>
                </div>
                
                <!-- Ï≤¥Ï§ë Î≥ÄÌôî Ï†ïÎ≥¥ -->
                <div class="weight-changes">
                    <div class="weight-change">
                        <span>ÏùºÏ£ºÏùº ÎèôÏïà</span>
                        <span id="weekDiff">-1kg</span>
                    </div>
                    <div class="weight-change">
                        <span>Ìïú Îã¨ ÎèôÏïà</span>
                        <span id="monthDiff">-5kg</span>
                    </div>
                </div>
            </div>
            
            <!-- Îì±Î°ù Î≤ÑÌäº -->
            <button class="record-button weight-button">Îì±Î°ù</button>
        </div>
        
        
        <!-- Ïö¥Îèô Ï†ïÎ≥¥ ÏÑπÏÖò -->
        <div class="sub-container exercise-sub">
            <div class="header">
                <h1>Ïö¥Îèô</h1>
            </div>
            
            <!-- Ïö¥Îèô Ï†ïÎ≥¥ Î†àÏù¥ÏïÑÏõÉ -->
            <div class="exercise-info">
                <!-- Îç§Î≤® ÏïÑÏù¥ÏΩò -->
                <div class="dumbbell-container">
                    <div class="circle-bg">
                        <div class="dumbbell">
                            <div class="dumbbell-bar"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Ïö¥Îèô Îç∞Ïù¥ÌÑ∞ -->
                <div class="exercise-data">
                    <!-- Ïö¥Îèô ÏãúÍ∞Ñ ÎùºÎ≤® -->
                    <div class="exercise-time-label">Ïò§ÎäòÏùò Ïö¥Îèô ÏãúÍ∞Ñ</div>
                    
                    <!-- Ïö¥Îèô ÏãúÍ∞Ñ Í∞í -->
                    <div class="exercise-time-value" th:text="${dailyStatistics.getTotalExerciseTime() + 'Î∂Ñ'}"></div>
                    
                    <!-- ÏπºÎ°úÎ¶¨ Ï†ïÎ≥¥ -->
                    <div class="burn-calories-info">
                        <span class="fire-icon">üî•</span>
                        <span th:text="${dailyStatistics.getTotalBurnedKcal() + ' kcal'}"></span>
                    </div>
                </div>
            </div>
            
            <!-- Îì±Î°ù Î≤ÑÌäº -->
            <button class="record-button exercise-button">Îì±Î°ù</button>
        </div>
    </div>
    
    <!-- Ï≤¥Ï§ë ÏûÖÎ†• Î™®Îã¨ -->
    <div class="modal-overlay" id="weightModal">
        <div class="modal-container">
            <div class="modal-header">
                <div class="modal-title">Ï≤¥Ï§ë ÏûÖÎ†•</div>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="weight-input-container">
                    <div class="weight-input-group">
                        <input type="number" class="weight-input" id="weightInput" value="79.6" step="0.1"
                               inputmode="decimal" min="20" max="200">
                        <span class="weight-unit">kg</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-button cancel-button" id="cancelButton">Ï∑®ÏÜå</button>
                <button class="modal-button submit-button" id="submitButton">Îì±Î°ù</button>
            </div>
        </div>
    </div>
    
    
    <!-- ÏπòÌåÖÎç∞Ïù¥ ÏÑ§Ï†ï Î™®Îã¨ -->
    <div class="modal-overlay" id="cheatDayModal">
        <div class="modal-container">
            <div class="modal-header">
                <div class="modal-title">ÏπòÌåÖÎç∞Ïù¥ ÏÑ§Ï†ï
                    <i class="bi bi-question-circle-fill" id="cheatDetail"></i>
                </div>
                <button class="modal-close">&times;</button>
            </div>
            
            <div class="modal-body">
                <div class="points-info">
                    <div class="points-label">ÏÇ¨Ïö© Í∞ÄÎä• Ìè¨Ïù∏Ìä∏</div>
                    <div class="points-value"><span id="cheatPoint" th:text="${user.getCheatingDay()}"></span> cp</div>
                </div>
                <button class="use-button">ÏÇ¨Ïö©</button>
            </div>

        </div>
    </div>
    
    <div id="cheatDayTooltip" class="popover-tooltip">
        ÏπºÎ°úÎ¶¨ Ï†úÌïúÏùÑ Ï¥àÍ≥ºÌïú Í≤ΩÏö∞, Ï¥àÍ≥ºÌïú ÏπºÎ°úÎ¶¨ÎßåÌÅº <span class="accent">ÏπòÌåÖÎç∞Ïù¥ Ìè¨Ïù∏Ìä∏(cp)</span>Î•º ÏÜåÎ™®ÌïòÏó¨ Ìï¥Îãπ ÎÇ†ÏùÑ ÏπòÌåÖÎç∞Ïù¥Î°ú ÏÑ§Ï†ïÌïòÍ≥† ÏãùÎã® ÏôÑÏàòÎ•º Ïù¥Ïñ¥ÎÇòÍ∞à Ïàò ÏûàÏäµÎãàÎã§.<br>
        Ìè¨Ïù∏Ìä∏Îäî <span class="accent">ÎãπÏùº ÏãùÎã® Í∏∞Î°ùÏùÑ ÏûêÏ†ï Ï†ÑÏóê ÏôÑÎ£å</span>ÌïòÍ≥† <span class="accent">ÏãùÎã® Î™©ÌëúÎ•º Îã¨ÏÑ±Ìï† Ïãú</span> ÏùºÏ†ïÎüâ ÌöçÎìùÌï† Ïàò ÏûàÏúºÎ©∞, <br><span class="accent">ÏµúÎåÄ 1,000Ìè¨Ïù∏Ìä∏ÍπåÏßÄ Î≥¥Ïú† Í∞ÄÎä•Ìï©ÎãàÎã§.</span><br>
        <span class="accent">ÏπòÌåÖÎç∞Ïù¥Î°ú ÏÑ§Ï†ïÎêú ÎÇ†ÏßúÏùò ÏãùÎã®Í≥º Ïö¥Îèô Í∏∞Î°ùÏùÄ Ï∂îÌõÑ ÏàòÏ†ïÏù¥ Î∂àÍ∞ÄÎä•</span>ÌïòÎãà, ÏãùÎã® Í∏∞Î°ùÏùÑ ÏôÑÎ£åÌïú ÌõÑ ÏÑ§Ï†ïÌï¥Ï£ºÏãúÍ∏∞ Î∞îÎûçÎãàÎã§.
    </div>


</div>


<!-- ÌéòÏù¥ÏßÄÎ≥Ñ JavaScript -->
<th:block layout:fragment="script">
    
    <!-- Í∞úÎ≥Ñ js ÌååÏùºÏóêÏÑú Î∂àÎü¨Ïò¨ Í≤ΩÏö∞ -->
    <script th:src="@{/js/record/record.js}"></script>


</th:block>
</body>

</html>