<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout2}">
<head>
    <title>사용자 프로필</title>
    
	    <!-- 페이지별 css -->
	<th:block layout:fragment="css">
		<link rel="stylesheet" th:href="@{/css/userpage/userpage.css}">
	</th:block>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js'></script>
    <link href='https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.css' rel='stylesheet' />
    <script src='https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/locale/ko.js'></script>
</head>
<body>
<div layout:fragment="content">
    <div class="profile-container">
    	<div class="profile-header">
        	<i class="bi bi-arrow-left back-btn"></i>
            <h3 class="profile-title" th:text="${user.nickname} + '님의 프로필'">사용자 프로필</h3>
        </div>
        
        <div class="profile-content">
            <img class="my-profile-image" th:src="@{${user.profileImage != null and user.profileImage.startsWith('/') ? 
                user.profileImage : 
                (user.profileImage != null ? '/images/' + user.profileImage : '/static/images/default-profile.png')}}" alt="프로필 이미지">
            <div class="profile-info">
                <div class="profile-stats">
                    <div class="stat-item">
                        <div class="stat-number" th:text="${user.friendCount}"></div>
                        <div class="stat-label">친구</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" th:text="${user.userId2}"></div>
                        <div class="stat-label">팔로워</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" th:text="${user.userId1}"></div>
                        <div class="stat-label">팔로잉</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="profile-name" th:text="${user.nickname}"></div>
        <h5 class="info" th:text="${user.gender == 'male' ? '남성' : '여성'} + ' / ' + ${user.height} + ' / ' + ${user.currentWeight}"></h5>
        <div class="user_intro">
            <h6>소개</h6>
            <h6 th:text="${user.myIntro != null and !user.myIntro.isEmpty() ? user.myIntro : '안녕하세요'}"></h6>
        </div>
        
        <div class="box">
		    <div class="box-title1">
		        <h6>기록</h6>
		    </div>
		    <div class="box-title2" th:data-user-id="${user.id}">
		        <h6>뱃지</h6>
		    </div>
		</div>
		
		<div class="calendar-container">
		    <div id="calendar"></div>
		</div>
    </div>
</div>

<!-- JavaScript -->
<th:block layout:fragment="script">
    <script th:src="@{/js/userpage/userpage.js}"></script>
</th:block>
</body>
</html>