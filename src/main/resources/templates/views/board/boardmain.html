<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layouts/layout}">

<head>
<th:block layout:fragment="css">
    <style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Apple SD Gothic Neo', 'Noto Sans KR', sans-serif;
    }

    .container {
        width: 375px;
        background-color: white;
        min-height: 90vh;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        position: relative;
    }

    /* Top search bar styles */
    .search-bar {
        display: flex;
        align-items: center;
        padding: 10px 15px;
        border-bottom: 1px solid #e0e0e0;
        transition: transform 0.3s ease;
    }

    .search-bar.hidden {
        transform: translateY(-100%);
    }

    .search-options {
        display: flex;
        align-items: center;
        gap: 10px;
        flex-grow: 1;
    }

    .search-option {
        font-size: 14px;
        font-weight: bold;
        color: #000;
        cursor: pointer;
    }

    .search-option.inactive {
        color: #888;
    }

    .search-tag {
        width: 25px;
        height: 25px;
        background-color: transparent;
        border: none;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
    }

    /* Category tabs styles */
    .category-tabs {
        display: flex;
        background-color: #fff;
        border-bottom: 1px solid #e0e0e0;
        position: sticky;
        top: 0;
        z-index: 10;
    }

    .category-tab {
        flex: 1;
        text-align: center;
        padding: 12px 0;
        font-size: 14px;
        color: #666;
        background: transparent;
        border: none;
        cursor: pointer;
    }

    .category-tab.active {
        color: #000;
        font-weight: bold;
        background-color: #E6EEF0;
    }

    .post-user {
        display: flex;
        align-items: center;
        padding: 10px;
    }

    .post-user-image {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        margin-right: 10px;
        background-color: #ddd;
        overflow: hidden;
        cursor: pointer;
    }

    .post-user-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .post-user-info {
        flex-grow: 1;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .post-user-details {
        display: flex;
        flex-direction: column;
    }

    .post-user-name {
        font-weight: bold;
    }

    .post-user-follower {
        color: #999;
        font-size: 12px;
    }

    .follow-button {
        background-color: #065F79;
        color: white;
        border: none;
        border-radius: 4px;
        padding: 5px 10px;
        font-size: 12px;
        cursor: pointer;
    }

    .post-image {
        width: 100%;
        max-height: 500px;
        object-fit: cover;
    }

    .post-actions {
        display: flex;
        justify-content: space-between;
        padding: 10px;
        border-bottom: 1px solid #e0e0e0;
    }

    .post-action-buttons {
        display: flex;
        gap: 15px;
    }

    .post-action-buttons button {
        background: none;
        border: none;
        display: flex;
        align-items: center;
        gap: 5px;
        font-size: 14px;
        cursor: pointer;
    }

    .post-caption {
        padding: 10px;
        font-size: 14px;
    }

    .hashtags-container {
        padding: 0 10px 10px;
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
    }

    .hashtag {
        padding: 4px 10px;
        color: #8B8B8B;
        font-size: 12px;
        font-weight: 600;
        border-radius: 5px;
        background-color: #EFEFEF;
        display: inline-block;
    }

    /* Profile Modal Styles */
    .profile-modal {
        position: fixed;
        bottom: 40px;
        left: 0;
        right: 0;
        margin: 0 auto;
        max-width: 375px;
        background-color: #f3f9fb;
        border-top-left-radius: 20px;
        border-top-right-radius: 20px;
        z-index: 100;
        box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        display: none;
    }

    .profile-modal.show {
        display: block;
    }

    .profile-modal-header {
        display: flex;
        justify-content: flex-end;
        padding: 10px;
    }

    .close-button {
        background: none;
        border: none;
        font-size: 20px;
        color: #888;
        cursor: pointer;
    }

    .profile-modal-content {
        padding: 10px 20px 20px;
        text-align: center;
    }

    .profile-image-large {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        margin: 0 auto 15px;
        overflow: hidden;
        background-color: #ddd;
    }

    .profile-image-large img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .profile-name {
        font-size: 18px;
        font-weight: bold;
        margin-bottom: 5px;
    }

    .profile-description {
        color: #888;
        font-size: 14px;
        margin-bottom: 20px;
    }

    .profile-stats {
        display: flex;
        justify-content: center;
        border-top: 1px solid #e0e0e0;
        border-bottom: 1px solid #e0e0e0;
        padding: 15px 0;
        margin-bottom: 20px;
    }

    .stat {
        flex: 1;
        text-align: center;
    }

    .stat-number {
        font-size: 18px;
        font-weight: bold;
    }

    .stat-label {
        font-size: 12px;
        color: #888;
    }

    .profile-actions {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin-bottom: 20px;
    }

    .action-button {
        background-color: #f0f0f0;
        border: none;
        border-radius: 20px;
        padding: 8px 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
    }

    .bottom-nav-modal {
        display: flex;
        justify-content: space-around;
        padding: 10px 0;
        border-top: 1px solid #e0e0e0;
    }

    .bottom-nav-item {
        text-align: center;
        flex: 1;
        cursor: pointer;
    }

    .bottom-nav-item svg {
        margin-bottom: 5px;
    }

    .bottom-nav-text {
        font-size: 10px;
        color: #888;
    }

    .bottom-nav-item.active .bottom-nav-text {
        color: #000;
    }

    .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 99;
        display: none;
    }

    .modal-overlay.show {
        display: block;
    }

    /* ëŒ“ê¸€ ì„¹ì…˜ ìŠ¤íƒ€ì¼ */
    .comments-modal {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        margin: 0 auto;
        max-width: 375px;
        height: 70vh;
        background-color: white;
        border-top-left-radius: 20px;
        border-top-right-radius: 20px;
        z-index: 100;
        box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        display: none;
        flex-direction: column;
    }

    .comments-modal.show {
        display: flex;
    }

    .comments-modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px;
        border-bottom: 1px solid #e0e0e0;
    }

    .comments-title {
        font-weight: bold;
        flex-grow: 1;
        text-align: center;
    }

    .comments-list {
        flex-grow: 1;
        overflow-y: auto;
        padding: 10px 0;
    }

    .comment-item {
        display: flex;
        padding: 10px 15px;
    }

    .comment-user-image {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        margin-right: 10px;
        background-color: #ddd;
        overflow: hidden;
    }

    .comment-user-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .comment-content {
        flex-grow: 1;
    }

    .comment-user-name {
        font-weight: bold;
        margin-bottom: 2px;
    }

    .comment-text {
        font-size: 14px;
        line-height: 1.4;
    }

    .comment-time {
        font-size: 12px;
        color: #888;
        margin-top: 3px;
    }

    .comment-actions {
        display: flex;
        gap: 15px;
        margin-top: 5px;
        font-size: 12px;
        color: #888;
    }

    .comment-like, .comment-reply {
        cursor: pointer;
    }

    .comment-input-container {
        display: flex;
        align-items: center;
        padding: 10px 15px;
        border-top: 1px solid #e0e0e0;
        background-color: white;
    }

    .comment-user-image-small {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        margin-right: 10px;
        background-color: #ddd;
        overflow: hidden;
    }

    .comment-user-image-small img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .comment-input-wrapper {
        flex-grow: 1;
        display: flex;
        align-items: center;
        border-radius: 20px;
        background-color: #f0f0f0;
        padding: 8px 15px;
    }

    .comment-input {
        flex-grow: 1;
        border: none;
        background: transparent;
        outline: none;
        font-size: 14px;
    }

    .emoji-button {
        background: none;
        border: none;
        font-size: 16px;
        color: #888;
        padding: 0;
        margin-right: 10px;
        cursor: pointer;
    }

    .comment-submit {
        color: #065F79;
        font-weight: bold;
        font-size: 14px;
        background: none;
        border: none;
        padding: 0 5px;
        cursor: pointer;
    }

    .comment-submit:disabled {
        color: #ccc;
        cursor: default;
    }

    /* ì´ëª¨ì§€ ì„ íƒê¸° */
    .emoji-selector {
        display: flex;
        justify-content: space-between;
        padding: 10px 15px;
        background-color: #f8f8f8;
        border-top: 1px solid #e0e0e0;
        overflow-x: auto;
        white-space: nowrap;
    }

    .emoji-item {
        font-size: 24px;
        margin: 0 5px;
        cursor: pointer;
    }
    </style>
</th:block>
</head>
<body>

    <div layout:fragment="content">
        <div class="container">
            <div class="search-bar">
                <div class="search-options">
                    <span class="search-option active" id="allFeed">ì „ì²´</span> <span
                        class="search-option inactive" id="followingFeed">íŒ”ë¡œì‰</span> <span
                        class="search-option inactive" id="popularFeed">ì¸ê¸°</span>
                </div>
                <button class="search-tag">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                        viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="11" cy="11" r="8"></circle>
                    ë„ë¼
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
                </button>
            </div>
            <div class="category-tabs">
                <button class="category-tab active">ì „ì²´</button>
                <button class="category-tab">ì‹ë‹¨</button>
                <button class="category-tab">ë ˆì‹œí”¼</button>
                <button class="category-tab">ìš´ë™</button>
                <button class="category-tab">ëˆˆë°”ë””</button>
            </div>

            <div id="postsContainer"></div>
        </div>

        <!-- Modal Overlay -->
        <div class="modal-overlay" id="modalOverlay"></div>

        <!-- Profile Modal -->
        <div class="profile-modal" id="profileModal">
            <div class="profile-modal-header">
                <button class="close-button" id="closeModalButton">Ã—</button>
            </div>
            <div class="profile-modal-content">
                <div class="profile-image-large">
                    <img src="${post.user.profileImage || '/static/images/default-profile.png'}" alt="Profile">
                </div>
                <div class="profile-name">ì›ìˆ­ì´ëŠ”ê·€ì—¬ì›Œ</div>
                <div class="profile-description">ë‹¤ê°™ì´ ê³ ë¦´ë¼</div>

                <div class="profile-stats">
                    <div class="stat">
                        <div class="stat-number">15</div>
                        <div class="stat-label">ë³´ìœ  íŒ”ë¡œì›Œ ìˆ˜</div>
                    </div>
                    <div class="stat">
                        <div class="stat-number">43</div>
                        <div class="stat-label">ì¹œêµ¬ ìˆ˜</div>
                    </div>
                </div>

                <div class="profile-actions">
                    <button class="action-button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path
                                d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="8.5" cy="7" r="4"></circle>
                        <line x1="20" y1="8" x2="20" y2="14"></line>
                        <line x1="23" y1="11" x2="17" y2="11"></line>
                    </svg>
                    </button>
                    <button class="action-button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path
                                d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>
                    </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- ëŒ“ê¸€ ëª¨ë‹¬ -->
        <div class="comments-modal" id="commentsModal">
            <div class="comments-modal-header">
                <button class="close-button" id="closeCommentsButton">Ã—</button>
                <div class="comments-title">ëŒ“ê¸€</div>
                <div style="width: 20px;"></div> <!-- ìš°ì¸¡ ì—¬ë°±ìš© -->
            </div>
            
            <div class="comments-list" id="commentsList">
                <!-- ëŒ“ê¸€ ë¦¬ìŠ¤íŠ¸ëŠ” ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
            </div>
            
            <div class="emoji-selector">
                <span class="emoji-item">â¤ï¸</span>
                <span class="emoji-item">ğŸ™Œ</span>
                <span class="emoji-item">ğŸ”¥</span>
                <span class="emoji-item">ğŸ‘</span>
                <span class="emoji-item">ğŸ˜¢</span>
                <span class="emoji-item">ğŸ˜</span>
                <span class="emoji-item">ğŸ˜®</span>
                <span class="emoji-item">ğŸ˜‚</span>
            </div>
            
            <div class="comment-input-container">
                <div class="comment-user-image-small">
                    <img src="/images/default-profile.jpg" alt="Your Profile">
                </div>
                <div class="comment-input-wrapper">
                    <input type="text" class="comment-input" id="commentInput" placeholder="ëŒ“ê¸€ ë‹¬ê¸°...">
                    <button class="comment-submit" id="submitComment" disabled>ê²Œì‹œ</button>
                </div>
            </div>
        </div>
    </div>

    <th:block layout:fragment="script">
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script>
        $(document).ready(function() {
            // í”„ë¡œí•„ ëª¨ë‹¬ì„ ì—´ê¸° ìœ„í•œ í•¨ìˆ˜
            function openProfileModal(userData) {
                // ì‚¬ìš©ì ë°ì´í„°ë¡œ ëª¨ë‹¬ ë‚´ìš© ì—…ë°ì´íŠ¸
                $('#profileModal .profile-image-large img').attr('src', userData.profileImage || '/static/images/default-profile.png');
                $('#profileModal .profile-name').text(userData.nickname);
                $('#profileModal .profile-description').text(userData.description || 'ì„¤ëª…ì´ ì—†ìŠµë‹ˆë‹¤');
                $('#profileModal .profile-stats .stat:nth-child(1) .stat-number').text(userData.followersCount || 0);
                $('#profileModal .profile-stats .stat:nth-child(2) .stat-number').text(userData.friendsCount || 0);

                // ëª¨ë‹¬ í‘œì‹œ
                $('#profileModal').addClass('show');
                $('#modalOverlay').addClass('show');
                document.body.style.overflow = 'hidden'; // ëª¨ë‹¬ ì—´ë¦´ ë•Œ ìŠ¤í¬ë¡¤ ë°©ì§€
            }

            // í”„ë¡œí•„ ì´ë¯¸ì§€ë¥¼ í´ë¦­í–ˆì„ ë•Œ ëª¨ë‹¬ ì—´ê¸°
            $('.post-profile-trigger').on('click', function() {
                const userData = $(this).data('user');
                openProfileModal(userData);
            });
            
            
            
            
            // í˜„ì¬ ì„ íƒëœ ê²Œì‹œë¬¼ ID (ëŒ“ê¸€ ê¸°ëŠ¥ì— ì‚¬ìš©)
            let currentPostId = null;

            // ëª¨ë‹¬ ë‹«ê¸° í•¨ìˆ˜
            function closeModal() {
                profileModal.classList.remove('show');
                modalOverlay.classList.remove('show');
                document.body.style.overflow = 'auto'; // ìŠ¤í¬ë¡¤ ë‹¤ì‹œ í™œì„±í™”
            }

            // ëŒ“ê¸€ ëª¨ë‹¬ ë‹«ê¸° í•¨ìˆ˜
            function closeCommentsModal() {
                commentsModal.classList.remove('show');
                modalOverlay.classList.remove('show');
                document.body.style.overflow = 'auto'; // ìŠ¤í¬ë¡¤ ë‹¤ì‹œ í™œì„±í™”
                currentPostId = null; // í˜„ì¬ ê²Œì‹œë¬¼ ID ë¦¬ì…‹
            }

            // ëª¨ë‹¬ ë‹«ê¸° ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            closeModalButton.addEventListener('click', closeModal);
            closeCommentsButton.addEventListener('click', closeCommentsModal);
            
            // ì˜¤ë²„ë ˆì´ í´ë¦­ ì‹œ ì—´ë ¤ìˆëŠ” ëª¨ë‹¬ ë‹«ê¸°
            modalOverlay.addEventListener('click', function() {
                if (profileModal.classList.contains('show')) {
                    closeModal();
                }
                if (commentsModal.classList.contains('show')) {
                    closeCommentsModal();
                }
            });

            // ëŒ“ê¸€ ëª¨ë‹¬ ì—´ê¸° í•¨ìˆ˜
            function openCommentsModal(postId) {
                currentPostId = postId;
                
                // ëŒ“ê¸€ ë¶ˆëŸ¬ì˜¤ê¸°
                loadComments(postId);
                
                // í”„ë¡œí•„ ëª¨ë‹¬ì´ ì—´ë ¤ ìˆìœ¼ë©´ ë‹«ê¸°
                if (profileModal.classList.contains('show')) {
                    closeModal();
                }
                
                // ëŒ“ê¸€ ëª¨ë‹¬ í‘œì‹œ
                commentsModal.classList.add('show');
                modalOverlay.classList.add('show');
                document.body.style.overflow = 'hidden'; // ëª¨ë‹¬ ì—´ë¦´ ë•Œ ìŠ¤í¬ë¡¤ ë°©ì§€
                
                // ì…ë ¥ í•„ë“œì— í¬ì»¤ìŠ¤
                setTimeout(() => {
                    commentInput.focus();
                }, 300);
            }

            // ëŒ“ê¸€ ë¶ˆëŸ¬ì˜¤ê¸° í•¨ìˆ˜
            function loadComments(postId) {
                const sampleComments = [
                    // í…ŒìŠ¤íŠ¸ìš© ëŒ“ê¸€ ë°ì´í„°
                    {
                        id: 1,
                        user: {
                            id: 101,
                            nickname: 'daegu_unniya',
                            profileImage: 'í‰í‰ì´.jpg'
                        },
                        text: 'ì§§ì€ ëŒ“ê¸€ í…ìŠ¤íŠ¸',
                        createdAt: '3ì¼',
                        likesCount: 265
                    }
                    // ë‹¤ë¥¸ ëŒ“ê¸€ë“¤...
                ];
                
                $('#commentsList').empty();
                
                sampleComments.forEach(comment => {
                    const commentHtml = `
                        <div class="comment-item">
                            <div class="comment-user-image">
                                <img src="/images/${comment.user.profileImage}" alt="Profile">
                            </div>
                            <div class="comment-content">
                                <div class="comment-user-name">${comment.user.nickname}</div>
                                <div class="comment-text">${comment.text}</div>
                                <div class="comment-time">${comment.createdAt}</div>
                                <div class="comment-actions">
                                    <span class="comment-like">ì¢‹ì•„ìš” ${comment.likesCount}</span>
                                    <span class="comment-reply">ë‹µê¸€ ë‹¬ê¸°</span>
                                </div>
                            </div>
                        </div>
                    `;
                    $('#commentsList').append(commentHtml);
                });
            }

            // ì´ëª¨ì§€ ì„ íƒê¸° ì´ë²¤íŠ¸
            $('.emoji-item').on('click', function() {
                const emoji = $(this).text();
                commentInput.value += emoji;
                commentInput.focus();
                submitComment.disabled = !commentInput.value.trim();

                // ëŒ“ê¸€ ëª¨ë‹¬ì´ ì—´ë ¤ ìˆì§€ ì•Šìœ¼ë©´ ì—´ê¸°
                if (!commentsModal.classList.contains('show')) {
                    openCommentsModal(currentPostId);
                }
            });

            // ëŒ“ê¸€ ì…ë ¥ ì´ë²¤íŠ¸ ì²˜ë¦¬
            commentInput.addEventListener('input', function() {
                submitComment.disabled = !this.value.trim();
            });
            
            // ëŒ“ê¸€ ì œì¶œ ì²˜ë¦¬
            submitComment.addEventListener('click', function() {
                const commentText = commentInput.value.trim();
                if (!commentText || !currentPostId) return;
                
                // ì„œë²„ì— ëŒ“ê¸€ì„ ì €ì¥í•˜ëŠ” AJAX ìš”ì²­ (ì˜ˆì‹œë¡œëŠ” í™”ë©´ì—ë§Œ ì¶”ê°€)
                const newComment = {
                    id: Date.now(),
                    user: { id: 999, nickname: 'ë‚˜', profileImage: 'default-profile.jpg' },
                    text: commentText,
                    createdAt: 'ë°©ê¸ˆ',
                    likesCount: 0
                };
                
                const commentHtml = `
                    <div class="comment-item">
                        <div class="comment-user-image">
                            <img src="/images/${newComment.user.profileImage}" alt="Profile">
                        </div>
                        <div class="comment-content">
                            <div class="comment-user-name">${newComment.user.nickname}</div>
                            <div class="comment-text">${newComment.text}</div>
                            <div class="comment-time">${newComment.createdAt}</div>
                            <div class="comment-actions">
                                <span class="comment-like">ì¢‹ì•„ìš” ${newComment.likesCount}</span>
                                <span class="comment-reply">ë‹µê¸€ ë‹¬ê¸°</span>
                            </div>
                        </div>
                    </div>
                `;
                
                $('#commentsList').append(commentHtml);
                
                // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
                commentInput.value = '';
                submitComment.disabled = true;
                
                // ìŠ¤í¬ë¡¤ì„ ë§¨ ì•„ë˜ë¡œ ì´ë™
                const commentsList = document.getElementById('commentsList');
                commentsList.scrollTop = commentsList.scrollHeight;
            });
       

            
        
            // Enter í‚¤ë¡œ ëŒ“ê¸€ ì…ë ¥
            commentInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey && !submitComment.disabled) {
                    e.preventDefault();
                    submitComment.click();
                }
            });
            
          
		    // ì´ˆê¸° ì •ì  ê²Œì‹œë¬¼ - ë™ì  ëª¨ë‹¬ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì—…ë°ì´íŠ¸
		    $("#profileImageTrigger").on('click', function() {
		        // ì •ì  ê²Œì‹œë¬¼ì—ì„œ ë°ì´í„° ì‚¬ìš©
		        const userData = {
		            profileImage: 'í‰í‰ì´.jpg',
		            nickname: 'ê³ ë¦´ë‘',
		            description: 'ë‹¤ê°™ì´ ê³ ë¦´ë¼',
		            followersCount: 120,
		            friendsCount: 43
		        };
		        openProfileModal(userData);
		    });

		    // ê²Œì‹œë¬¼ ëª©ë¡ì„ ê°€ì ¸ì™€ì„œ í™”ë©´ì— ë™ì ìœ¼ë¡œ ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜
		    function loadPosts() {
		        $.ajax({
		            url: '/api/with-details',  // ì„œë²„ì—ì„œ ê²Œì‹œë¬¼ ë°ì´í„°ë¥¼ ë°›ëŠ” API ì—”ë“œí¬ì¸íŠ¸
		            method: 'GET',
		            success: function(data) {
		                $('#postsContainer').empty(); // ê¸°ì¡´ ê²Œì‹œë¬¼ ì œê±° (ì„ íƒì‚¬í•­)
		                
		                data.forEach(post => {
		                    const postHtml = `
		                        <div class="post-container">
		                            <!-- ì‚¬ìš©ì ì •ë³´ -->
		                            <div class="post-user">
		                                <div class="post-user-image post-profile-trigger" data-user='${JSON.stringify(post.user)}'>
		                                    <img src="${post.user.profileImage || '/static/images/default-profile.png'}" alt="Profile">
		                                </div>
		                                <div class="post-user-info">
		                                    <div class="post-user-details">
		                                        <div class="post-user-name">${post.user.nickname}</div>
		                                        <div class="post-user-follower">íŒ”ë¡œì›Œ ${post.user.followersCount || 0}</div>
		                                    </div>
		                                    <button class="follow-button">íŒ”ë¡œìš°</button>
		                                </div>
		                            </div>

		                            <!-- ê²Œì‹œë¬¼ ì´ë¯¸ì§€ -->
		                            ${post.images.map(image => `
		                                <img src="/images/${image.fileName}" alt="Post Image" class="post-image">
		                            `).join('')}

		                            <!-- ê²Œì‹œë¬¼ ì•¡ì…˜ -->
		                            <div class="post-actions">
		                                <div class="post-action-buttons">
		                                    
		                                <button>
		                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
		                                            viewBox="0 0 24 24" fill="none" stroke="currentColor"
		                                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
		                                            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
		                                        </svg>
		                                        ${post.likesCount || 0}
		                                    </button>
		                                    <button>
		                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
		                                            viewBox="0 0 24 24" fill="none" stroke="currentColor"
		                                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
		                                            <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>
		                                        </svg>
		                                        ${post.commentCount || 0}
		                                    </button>
		                                </div>
		                            </div>

		                            <!-- ê²Œì‹œë¬¼ ì„¤ëª… -->
		                            <div class="post-caption">${post.content}</div>

		                            <!-- í•´ì‹œíƒœê·¸ -->
		                            <div class="hashtags-container">
		                                ${post.hashtags ? post.hashtags.map(tag => `<span class="hashtag">#${tag}</span>`).join(' ') : '<span class="hashtag">#ìš´ë™</span> <span class="hashtag">#ì¼ìƒ</span>'}
		                            </div>
		                        </div>
		                    `;
		                    $('#postsContainer').append(postHtml);
		                });
		                
		                // ë™ì ìœ¼ë¡œ ìƒì„±ëœ í”„ë¡œí•„ ì´ë¯¸ì§€ì— í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€
		                $('.post-profile-trigger').on('click', function() {
		                    const userData = $(this).data('user');
		                    openProfileModal(userData);
		                });
		            },
		            error: function(xhr, status, error) {
		                console.error('ê²Œì‹œë¬¼ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
		            }
		        });
		    }

		    // ì´ˆê¸° ê²Œì‹œë¬¼ ë¶ˆëŸ¬ì˜¤ê¸°
		    loadPosts();
		});
</script>
	</th:block>
</body>
</html>